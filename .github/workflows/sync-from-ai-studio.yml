name: Sync from AI Studio

# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
on:
  schedule:
    - cron: '*/5 * * * *'  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
  workflow_dispatch: # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  pull-from-ai-studio:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          
      - name: Configure Git
        run: |
          git config user.name "AI Studio Bot"
          git config user.email "ai-studio@bot.com"
          
      - name: Pull latest from main
        run: |
          git pull origin main --rebase || true
          
      - name: Check for AI Studio changes
        id: check
        run: |
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç AI Studio
          if git log --since="5 minutes ago" --grep="üíæ Auto-save" --oneline | grep -q "üíæ"; then
            echo "changes=true" >> $GITHUB_OUTPUT
            echo "‚úÖ –ù–∞–π–¥–µ–Ω—ã –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç AI Studio"
          else
            echo "changes=false" >> $GITHUB_OUTPUT
            echo "‚ÑπÔ∏è –ù–µ—Ç –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π"
          fi
          
      - name: Notify about sync
        if: steps.check.outputs.changes == 'true'
        run: |
          echo "üîÑ AI Studio —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å GitHub"
          git log -1 --pretty=format:"%h - %s (%an)"
