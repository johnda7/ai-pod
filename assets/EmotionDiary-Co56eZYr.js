import{r as c,j as e,m as s,H as M,X as T,A as z,d as C,S as E,Z as H,F as P}from"./index-DI5uzzHj.js";import{u as I}from"./useSyncTool-C8ERaAi5.js";const O=[{emoji:"ðŸ˜Š",name:"Ð Ð°Ð´Ð¾ÑÑ‚ÑŒ",color:"#fbbf24",image:"https://images.unsplash.com/photo-1489710437720-ebb67ec84dd2?w=150&h=150&fit=crop"},{emoji:"ðŸ˜Œ",name:"Ð¡Ð¿Ð¾ÐºÐ¾Ð¹ÑÑ‚Ð²Ð¸Ðµ",color:"#22c55e",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=150&h=150&fit=crop"},{emoji:"ðŸ¤”",name:"Ð—Ð°Ð´ÑƒÐ¼Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ",color:"#6366f1",image:"https://images.unsplash.com/photo-1457369804613-52c61a468e7d?w=150&h=150&fit=crop"},{emoji:"ðŸ˜¤",name:"Ð Ð°Ð·Ð´Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ",color:"#ef4444",image:"https://images.unsplash.com/photo-1534330207526-8e81f10ec6fc?w=150&h=150&fit=crop"},{emoji:"ðŸ˜¢",name:"Ð“Ñ€ÑƒÑÑ‚ÑŒ",color:"#3b82f6",image:"https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?w=150&h=150&fit=crop"},{emoji:"ðŸ˜°",name:"Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð°",color:"#f97316",image:"https://images.unsplash.com/photo-1475137979732-b349acb6b7e3?w=150&h=150&fit=crop"},{emoji:"ðŸ˜´",name:"Ð£ÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ",color:"#8b5cf6",image:"https://images.unsplash.com/photo-1520206183501-b80df61043c2?w=150&h=150&fit=crop"},{emoji:"ðŸ¤©",name:"Ð’Ð¾ÑÑ‚Ð¾Ñ€Ð³",color:"#ec4899",image:"https://images.unsplash.com/photo-1533227268428-f9ed0900fb3b?w=150&h=150&fit=crop"},{emoji:"ðŸ˜",name:"ÐÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾",color:"#6b7280",image:"https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=150&h=150&fit=crop"},{emoji:"ðŸ’ª",name:"Ð£Ð²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ",color:"#14b8a6",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=150&h=150&fit=crop"},{emoji:"ðŸ¥°",name:"Ð›ÑŽÐ±Ð¾Ð²ÑŒ",color:"#f43f5e",image:"https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=150&h=150&fit=crop"},{emoji:"ðŸ˜Ž",name:"ÐšÑ€ÑƒÑ‚Ð¾ÑÑ‚ÑŒ",color:"#0ea5e9",image:"https://images.unsplash.com/photo-1492681290082-e932832941e6?w=150&h=150&fit=crop"}],h=[{value:1,emoji:"ðŸ”‹",label:"ÐŸÐ¾Ñ‡Ñ‚Ð¸ Ð½Ð¾Ð»ÑŒ",color:"#ef4444"},{value:2,emoji:"ðŸª«",label:"ÐœÐ°Ð»Ð¾ ÑÐ¸Ð»",color:"#f97316"},{value:3,emoji:"âš¡",label:"ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾",color:"#eab308"},{value:4,emoji:"ðŸ’ª",label:"ÐœÐ½Ð¾Ð³Ð¾ ÑÐ½ÐµÑ€Ð³Ð¸Ð¸",color:"#22c55e"},{value:5,emoji:"ðŸš€",label:"Ð¡ÑƒÐ¿ÐµÑ€-Ð·Ð°Ñ€ÑÐ´!",color:"#10b981"}],u=["Ð§Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾?","Ð—Ð° Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€ÐµÐ½(Ð°) ÑÐµÐ³Ð¾Ð´Ð½Ñ?","Ð§Ñ‚Ð¾ Ñ‚ÐµÐ±Ñ Ð¿Ð¾Ñ€Ð°Ð´Ð¾Ð²Ð°Ð»Ð¾?","ÐšÐ°ÐºÐ¾Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð´Ð½Ñ Ð±Ñ‹Ð» Ð»ÑƒÑ‡ÑˆÐ¸Ð¼?","Ð§Ñ‚Ð¾ Ñ‚Ñ‹ ÑÐ´ÐµÐ»Ð°Ð»(Ð°) ÐºÐ»Ð°ÑÑÐ½Ð¾Ð³Ð¾?"],A=({isOpen:f,onClose:j,onComplete:w})=>{const{data:r,setData:y}=I([],{storageKey:"emotion_diary_entries",debounceMs:1e3}),[l,b]=c.useState("emotion"),[t,N]=c.useState(null),[n,v]=c.useState(3),[x,g]=c.useState(""),[k]=c.useState(u[Math.floor(Math.random()*u.length)]),d=c.useMemo(()=>{if(r.length===0)return 0;const a=new Date().toDateString(),i=new Date(Date.now()-864e5).toDateString();let m=0;for(let o=0;o<r.length;o++){const p=new Date(r[o].date).toDateString();if(o===0&&(p===a||p===i))m++;else if(o>0){const $=new Date(r[o-1].date),D=new Date(r[o].date);if(($.getTime()-D.getTime())/864e5<=1)m++;else break}}return m},[r]),S=()=>{if(!t)return;const a={date:new Date().toISOString(),emotion:t.name,emoji:t.emoji,note:x,energy:n};y(p=>[a,...p]);const i=30,m=Math.min(d*5,50),o=i+m;b("done"),setTimeout(()=>{w(o)},2e3)};return f?e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, #1a0a2e 0%, #2a1040 30%, #1a0a2e 100%)"}}),e.jsx(s.div,{className:"absolute top-0 left-0 w-full h-1/2",style:{background:"radial-gradient(ellipse at 30% 0%, rgba(236,72,153,0.25) 0%, transparent 60%)",filter:"blur(60px)"},animate:{opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0}}),e.jsx(s.div,{className:"absolute top-20 right-0 w-1/2 h-1/2",style:{background:"radial-gradient(ellipse at 100% 20%, rgba(139,92,246,0.2) 0%, transparent 60%)",filter:"blur(50px)"},animate:{opacity:[.4,.7,.4]},transition:{duration:5,repeat:1/0,delay:1}}),[...Array(20)].map((a,i)=>e.jsx(s.div,{className:"absolute w-1 h-1 bg-white rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,opacity:.3+Math.random()*.4},animate:{opacity:[.2,.8,.2]},transition:{duration:2+Math.random()*3,repeat:1/0,delay:Math.random()*2}},i))]}),e.jsx("div",{className:"sticky top-0 z-30 px-4 pt-4 pb-4",children:e.jsx(s.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"p-4 rounded-3xl",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(40px)",border:"1px solid rgba(255,255,255,0.15)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-14 h-14 rounded-xl overflow-hidden relative",style:{boxShadow:"0 4px 20px rgba(236,72,153,0.3)"},children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=100&h=100&fit=crop",alt:"Emotions",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-pink-600/60 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(M,{size:24,className:"text-white"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Ð”Ð½ÐµÐ²Ð½Ð¸Ðº Ð­Ð¼Ð¾Ñ†Ð¸Ð¹"}),e.jsx("p",{className:"text-white/50 text-xs",children:d>0?`ðŸ”¥ ${d} Ð´Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´!`:"ÐšÐ°Ðº Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ?"})]})]}),e.jsx("button",{onClick:j,className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.1)"},children:e.jsx(T,{size:20,className:"text-white"})})]})})}),e.jsxs("div",{className:"relative z-10 px-4 pb-20",children:[e.jsxs(z,{mode:"wait",children:[l==="emotion"&&e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("p",{className:"text-white/80 mb-4 text-center",children:"ÐšÐ°ÐºÑƒÑŽ ÑÐ¼Ð¾Ñ†Ð¸ÑŽ Ñ‚Ñ‹ ÑÐµÐ¹Ñ‡Ð°Ñ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ?"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:O.map(a=>e.jsxs(s.button,{onClick:()=>N(a),className:"rounded-2xl overflow-hidden relative aspect-square",style:{border:(t==null?void 0:t.name)===a.name?`3px solid ${a.color}`:"3px solid transparent",boxShadow:(t==null?void 0:t.name)===a.name?`0 4px 20px ${a.color}50`:"none"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",style:{background:`${a.color}80`},children:[e.jsx("span",{className:"text-3xl mb-1",children:a.emoji}),e.jsx("span",{className:"text-white text-xs font-medium",children:a.name})]}),(t==null?void 0:t.name)===a.name&&e.jsx(s.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-white flex items-center justify-center",children:e.jsx(C,{size:14,style:{color:a.color}})})]},a.name))}),e.jsx(s.button,{onClick:()=>t&&b("energy"),disabled:!t,className:"w-full py-4 rounded-2xl font-bold text-white transition-all disabled:opacity-50",style:{background:t?`linear-gradient(135deg, ${t.color} 0%, ${t.color}cc 100%)`:"rgba(255,255,255,0.1)",boxShadow:t?`0 8px 32px ${t.color}40`:"none"},whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.98}:{},children:"Ð”Ð°Ð»ÐµÐµ"})]},"emotion"),l==="energy"&&e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("p",{className:"text-white/80 mb-4 text-center",children:"Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñƒ Ñ‚ÐµÐ±Ñ ÑÐ½ÐµÑ€Ð³Ð¸Ð¸?"}),e.jsx("div",{className:"space-y-3 mb-6",children:h.map(a=>e.jsxs(s.button,{onClick:()=>v(a.value),className:"w-full p-4 rounded-2xl flex items-center gap-4 transition-all",style:{background:n===a.value?`linear-gradient(135deg, ${a.color}30 0%, ${a.color}15 100%)`:"rgba(255,255,255,0.05)",border:`1px solid ${n===a.value?a.color+"50":"rgba(255,255,255,0.1)"}`,boxShadow:n===a.value?`0 4px 20px ${a.color}30`:"none"},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("span",{className:"text-3xl",children:a.emoji}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx("span",{className:"text-white font-medium",children:a.label})}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(i=>e.jsx("div",{className:"w-2 h-5 rounded-full transition-all",style:{background:i<=a.value?a.color:"rgba(255,255,255,0.1)"}},i))})]},a.value))}),e.jsx(s.button,{onClick:()=>b("note"),className:"w-full py-4 rounded-2xl font-bold text-white",style:{background:`linear-gradient(135deg, ${h[n-1].color} 0%, ${h[n-1].color}cc 100%)`,boxShadow:`0 8px 32px ${h[n-1].color}40`},whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ð”Ð°Ð»ÐµÐµ"})]},"energy"),l==="note"&&e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"rounded-2xl p-4 mb-4",style:{background:"linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.05) 100%)",border:"1px solid rgba(139,92,246,0.2)"},children:[e.jsx("p",{className:"text-white/80 mb-1",children:k}),e.jsx("p",{className:"text-white/40 text-xs",children:'Ð¢ÐµÑ…Ð½Ð¸ÐºÐ° "Ð¯ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†!" Ð¾Ñ‚ ÐšÐ°Ñ‚Ð¸ ðŸ’œ'})]}),e.jsx("textarea",{value:x,onChange:a=>g(a.target.value),placeholder:"ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¿Ð°Ñ€Ñƒ ÑÐ»Ð¾Ð²...",className:"w-full h-32 p-4 rounded-2xl text-white placeholder-white/30 resize-none focus:outline-none focus:ring-2 focus:ring-purple-500/50 mb-4",style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["Ð¯ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†! ðŸ’ª","Ð¡Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑÑ!","Ð‘Ñ‹Ð»Ð¾ Ð½ÐµÐ¿Ñ€Ð¾ÑÑ‚Ð¾","ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ"].map(a=>e.jsx("button",{onClick:()=>g(a),className:"px-3 py-2 rounded-xl text-white/60 text-sm transition-all",style:{background:x===a?"rgba(139,92,246,0.3)":"rgba(255,255,255,0.05)",border:`1px solid ${x===a?"rgba(139,92,246,0.5)":"rgba(255,255,255,0.1)"}`},children:a},a))}),e.jsxs(s.button,{onClick:S,className:"w-full py-4 rounded-2xl font-bold text-white flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%)",boxShadow:"0 8px 32px rgba(139,92,246,0.4)"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{size:20}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"]})]},"note"),l==="done"&&e.jsxs(s.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center py-12",children:[e.jsx(s.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:.5},className:"text-7xl mb-6",children:t==null?void 0:t.emoji}),e.jsx("h3",{className:"text-3xl font-black text-white mb-3",children:"Ð—Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾! âœ¨"}),e.jsx("p",{className:"text-white/60 mb-6",children:"Ð¢Ñ‹ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†, Ñ‡Ñ‚Ð¾ ÑÐ»ÐµÐ´Ð¸ÑˆÑŒ Ð·Ð° ÑÐ²Ð¾Ð¸Ð¼Ð¸ ÑÐ¼Ð¾Ñ†Ð¸ÑÐ¼Ð¸"}),e.jsxs("div",{className:"inline-flex items-center gap-4 p-4 rounded-2xl",style:{background:"linear-gradient(135deg, rgba(139,92,246,0.2) 0%, rgba(236,72,153,0.1) 100%)",border:"1px solid rgba(139,92,246,0.3)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-yellow-400"}),e.jsx("span",{className:"text-yellow-400 font-bold text-lg",children:"+30 XP"})]}),d>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-6 bg-white/20"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{size:20,className:"text-orange-400"}),e.jsxs("span",{className:"text-orange-400 font-bold",children:["+",Math.min(d*5,50)," Ð±Ð¾Ð½ÑƒÑ"]})]})]})]})]},"done")]}),l!=="done"&&e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:["emotion","energy","note"].map((a,i)=>e.jsx(s.div,{className:"h-2 rounded-full transition-all",style:{width:l===a?24:8,background:l===a?"linear-gradient(90deg, #8b5cf6, #ec4899)":["emotion","energy","note"].indexOf(l)>i?"#22c55e":"rgba(255,255,255,0.2)"},animate:{width:l===a?24:8}},a))})]})]}):null};export{A as EmotionDiary,A as default};
