import{r as n,j as e,A as P,m as o,X as D,f as L,t as G,n as q,q as K}from"./index-C-krwTSn.js";import{u as O}from"./useSyncTool-CilIbYhx.js";import{S as X}from"./SyncIndicator-kk7o8woT.js";const x=[{id:"study",name:"Ð£Ñ‡Ñ‘Ð±Ð°",emoji:"ðŸ“š",color:"#6366f1"},{id:"health",name:"Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ",emoji:"ðŸ’ª",color:"#22c55e"},{id:"hobby",name:"Ð¥Ð¾Ð±Ð±Ð¸",emoji:"ðŸŽ¨",color:"#f59e0b"},{id:"social",name:"ÐžÐ±Ñ‰ÐµÐ½Ð¸Ðµ",emoji:"ðŸ‘¥",color:"#ec4899"},{id:"personal",name:"Ð›Ð¸Ñ‡Ð½Ð¾Ðµ",emoji:"â­",color:"#8b5cf6"},{id:"other",name:"Ð”Ñ€ÑƒÐ³Ð¾Ðµ",emoji:"ðŸŽ¯",color:"#64748b"}],_=[{title:"Ð§Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ð¸",target:12,unit:"ÐºÐ½Ð¸Ð³",category:"study"},{title:"Ð—Ð°Ð½Ð¸Ð¼Ð°Ñ‚ÑŒÑÑ ÑÐ¿Ð¾Ñ€Ñ‚Ð¾Ð¼",target:30,unit:"Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð¾Ðº",category:"health"},{title:"ÐœÐµÐ´Ð¸Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ",target:30,unit:"Ð´Ð½ÐµÐ¹",category:"health"},{title:"Ð£Ñ‡Ð¸Ñ‚ÑŒ Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹",target:100,unit:"ÑƒÑ€Ð¾ÐºÐ¾Ð²",category:"study"},{title:"Ð Ð¸ÑÐ¾Ð²Ð°Ñ‚ÑŒ",target:50,unit:"Ñ€Ð¸ÑÑƒÐ½ÐºÐ¾Ð²",category:"hobby"}],V=({isOpen:$,onClose:A,onComplete:h})=>{const{data:a,setData:m,syncStatus:E}=O([],{storageKey:"goals_tracker",debounceMs:1e3}),[u,b]=n.useState(!1),[B,M]=n.useState(null),[d,p]=n.useState(""),[N,y]=n.useState(""),[c,j]=n.useState("personal"),[v,g]=n.useState("10"),[k,f]=n.useState("Ñ€Ð°Ð·"),[S,C]=n.useState(""),F=()=>{if(!d.trim())return;const t=x.find(i=>i.id===c),s={id:Date.now().toString(),title:d.trim(),description:N.trim()||void 0,category:c,progress:0,target:parseInt(v)||10,unit:k,deadline:S||void 0,createdAt:Date.now(),color:(t==null?void 0:t.color)||"#6366f1"};m([...a,s]),z(),h(15)},z=()=>{p(""),y(""),j("personal"),g("10"),f("Ñ€Ð°Ð·"),C(""),b(!1)},w=(t,s)=>{m(a.map(i=>{if(i.id===t){const l=Math.max(0,Math.min(i.target,i.progress+s));return s>0&&h(5),l===i.target&&i.progress<i.target&&h(50),{...i,progress:l}}return i}))},R=t=>{m(a.filter(s=>s.id!==t)),M(null)},I=t=>{p(t.title),g(t.target.toString()),f(t.unit),j(t.category),b(!0)},T=a.filter(t=>t.progress>=t.target).length,U=a.length>0?Math.round(a.reduce((t,s)=>t+s.progress/s.target*100,0)/a.length):0;return $?e.jsx(P,{children:e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-[#020617] overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 right-10 w-72 h-72 bg-amber-600/15 rounded-full blur-[100px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-40 left-10 w-80 h-80 bg-orange-600/10 rounded-full blur-[120px]"})]}),e.jsx("div",{className:"sticky top-0 z-30 px-4 pt-4 pb-4",children:e.jsxs("div",{className:"p-4 rounded-3xl",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(40px) saturate(180%)",border:"1px solid rgba(255,255,255,0.15)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(245,158,11,0.3) 0%, rgba(234,88,12,0.2) 100%)"},children:e.jsx("span",{className:"text-2xl",children:"ðŸŽ¯"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"ÐœÐ¾Ð¸ Ð¦ÐµÐ»Ð¸"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-white/50 text-xs",children:[T,"/",a.length," Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾"]}),e.jsx(X,{status:E})]})]})]}),e.jsx("button",{onClick:A,className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",children:e.jsx(D,{size:20,className:"text-white"})})]}),a.length>0&&e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("div",{className:"flex-1 rounded-xl p-3 text-center",style:{background:"rgba(245,158,11,0.15)"},children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:a.length}),e.jsx("div",{className:"text-white/40 text-xs",children:"Ð¦ÐµÐ»ÐµÐ¹"})]}),e.jsxs("div",{className:"flex-1 rounded-xl p-3 text-center",style:{background:"rgba(34,197,94,0.15)"},children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:T}),e.jsx("div",{className:"text-white/40 text-xs",children:"Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾"})]}),e.jsxs("div",{className:"flex-1 rounded-xl p-3 text-center",style:{background:"rgba(99,102,241,0.15)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-400",children:[U,"%"]}),e.jsx("div",{className:"text-white/40 text-xs",children:"ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ"})]})]})]})}),e.jsx("div",{className:"px-4 pb-40 overflow-y-auto h-[calc(100vh-220px)]",children:a.length===0&&!u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-3xl p-6 text-center mb-6",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{className:"text-5xl mb-4 block",children:"ðŸŽ¯"}),e.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"ÐŸÐ¾ÑÑ‚Ð°Ð²ÑŒ ÑÐ²Ð¾ÑŽ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ñ†ÐµÐ»ÑŒ!"}),e.jsx("p",{className:"text-white/40 text-sm",children:"Ð¦ÐµÐ»Ð¸ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÑŽÑ‚ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµÐ³Ð¾"})]}),e.jsx("h3",{className:"text-white/40 text-xs font-bold uppercase tracking-wider mb-3",children:"ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ñ†ÐµÐ»Ð¸"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:_.map((t,s)=>{const i=x.find(l=>l.id===t.category);return e.jsxs("button",{onClick:()=>I(t),className:"rounded-2xl p-4 flex items-center gap-3 text-left transition-all active:scale-[0.98]",style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{className:"text-2xl",children:i==null?void 0:i.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium text-sm",children:t.title}),e.jsxs("div",{className:"text-white/40 text-xs",children:[t.target," ",t.unit]})]}),e.jsx(L,{size:18,className:"text-white/30"})]},s)})})]}):e.jsx("div",{className:"space-y-3",children:a.map(t=>{const s=x.find(r=>r.id===t.category),i=Math.round(t.progress/t.target*100),l=t.progress>=t.target;return e.jsxs(o.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-3xl p-4",style:{background:l?"linear-gradient(135deg, rgba(34,197,94,0.15) 0%, rgba(34,197,94,0.05) 100%)":"rgba(255,255,255,0.05)",border:`1px solid ${l?"rgba(34,197,94,0.3)":`${t.color}30`}`},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{background:`${t.color}20`},children:l?e.jsx(G,{size:24,className:"text-green-400"}):e.jsx("span",{className:"text-2xl",children:s==null?void 0:s.emoji})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-bold truncate",children:t.title}),t.description&&e.jsx("p",{className:"text-white/40 text-xs truncate",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md",style:{background:`${t.color}20`,color:t.color},children:s==null?void 0:s.name}),t.deadline&&e.jsxs("span",{className:"text-white/30 text-xs",children:["Ð´Ð¾ ",new Date(t.deadline).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})]})]})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),R(t.id)},className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-red-500/20 transition-colors active:scale-90",children:e.jsx(q,{size:14,className:"text-white/40"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-white/50",children:[t.progress," / ",t.target," ",t.unit]}),e.jsxs("span",{style:{color:t.color},children:[i,"%"]})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(o.div,{initial:{width:0},animate:{width:`${i}%`},className:"h-full rounded-full",style:{background:l?"#22c55e":t.color}})})]}),!l&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),w(t.id,-1)},disabled:t.progress===0,className:"flex-1 py-3 rounded-xl bg-white/5 text-white/50 text-sm font-medium disabled:opacity-30 active:scale-95 transition-transform",children:"-1"}),e.jsxs("button",{onClick:r=>{r.stopPropagation(),w(t.id,1)},className:"flex-1 py-3 rounded-xl text-white text-sm font-bold active:scale-95 transition-transform",style:{background:t.color},children:["+1 ",t.unit.slice(0,-1)||t.unit]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),w(t.id,5)},className:"flex-1 py-3 rounded-xl bg-white/10 text-white text-sm font-medium active:scale-95 transition-transform",children:"+5"})]}),l&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-green-400",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm font-bold",children:"Ð¦ÐµÐ»ÑŒ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð°!"})]})]},t.id)})})}),e.jsx(P,{children:u&&e.jsx(o.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed inset-0 z-50 bg-[#020617]/95 backdrop-blur-xl overflow-y-auto",children:e.jsxs("div",{className:"px-4 pt-20 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ"}),e.jsx("button",{onClick:z,className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center",children:e.jsx(D,{size:20,className:"text-white"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-white/50 text-xs font-medium mb-2 block",children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸"}),e.jsx("input",{type:"text",value:d,onChange:t=>p(t.target.value),placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐŸÑ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ 10 ÐºÐ½Ð¸Ð³",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-white/50 text-xs font-medium mb-2 block",children:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),e.jsx("textarea",{value:N,onChange:t=>y(t.target.value),placeholder:"Ð—Ð°Ñ‡ÐµÐ¼ Ñ‚ÐµÐ±Ðµ ÑÑ‚Ð° Ñ†ÐµÐ»ÑŒ?",rows:2,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 resize-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-white/50 text-xs font-medium mb-2 block",children:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(t=>e.jsxs("button",{onClick:()=>j(t.id),className:`p-3 rounded-xl text-center transition-all ${c===t.id?"":"opacity-50"}`,style:{background:`${t.color}20`,border:`1px solid ${c===t.id?t.color:"transparent"}`},children:[e.jsx("span",{className:"text-xl block mb-1",children:t.emoji}),e.jsx("span",{className:"text-white text-xs",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-white/50 text-xs font-medium mb-2 block",children:"Ð¦ÐµÐ»ÑŒ"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:v,onChange:t=>g(t.target.value),className:"w-24 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white text-center"}),e.jsx("input",{type:"text",value:k,onChange:t=>f(t.target.value),placeholder:"ÐºÐ½Ð¸Ð³, Ð´Ð½ÐµÐ¹, Ñ€Ð°Ð·...",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-white/50 text-xs font-medium mb-2 block",children:"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),e.jsx("input",{type:"date",value:S,onChange:t=>C(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white"})]}),e.jsx("button",{onClick:F,disabled:!d.trim(),className:"w-full py-4 rounded-2xl font-bold text-white disabled:opacity-50",style:{background:"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)",boxShadow:"0 8px 32px rgba(245,158,11,0.4)"},children:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ†ÐµÐ»ÑŒ"})]})})}),!u&&e.jsx("div",{className:"fixed bottom-24 left-4 right-4 z-40",children:e.jsxs("button",{onClick:()=>b(!0),className:"w-full py-4 rounded-2xl font-bold text-white flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)",boxShadow:"0 8px 32px rgba(245,158,11,0.4)"},children:[e.jsx(K,{size:20}),"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ†ÐµÐ»ÑŒ"]})})]})}):null};export{V as GoalsTool,V as default};
